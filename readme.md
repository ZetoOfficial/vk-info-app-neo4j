# VK Info App with Neo4j

VK Info App — это приложение на Go для сбора и анализа данных пользователей социальной сети VK с использованием базы данных Neo4j. Приложение позволяет собирать информацию о подписчиках и подписках, а также выполнять предопределенные запросы для анализа данных.

## Установка Go и Запуск Проекта

### Шаг 1: Установка Go

1. Перейдите на официальный сайт Go: [https://go.dev/dl/](https://go.dev/dl/).
2. Выберите дистрибутив для вашей операционной системы и следуйте инструкциям для установки.
3. После установки проверьте, что Go установлен, выполнив команду:

   ```bash
   go version
   ```

   Должно отобразиться сообщение с установленной версией Go, например: `go version go1.23.2 darwin/arm64`.

### Шаг 2: Клонирование и Запуск Проекта

1. Склонируйте репозиторий проекта:

   ```bash
   git clone https://github.com/ZetoOfficial/vk-info-app-neo4j
   ```

2. Перейдите в директорию проекта:

   ```bash
   cd vk-info-app-neo4j
   ```

3. Установите зависимости и запустите проект:

   ```bash
   go mod tidy
   go run cmd/vk_app/main.go
   ```

## Настройка `.env` файла

Для работы приложения требуется файл `.env`, в котором хранятся конфигурации для подключения к VK API и базе данных Neo4j. 
В корневой директории проекта находится пример файла .env.example. Скопируйте его в .env и укажите необходимые параметры:

```env
VK_ACCESS_TOKEN=<ваш_токен_доступа_VK>
NEO4J_URI=bolt://localhost:7687
NEO4J_USERNAME=<имя_пользователя_Neo4j>
NEO4J_PASSWORD=<пароль_Neo4j>
```

- `VK_ACCESS_TOKEN`: Токен доступа для работы с API VK. Можно получить в [настройках VK API](https://vk.com/dev).
- `NEO4J_URI`: URI для подключения к базе данных Neo4j.
- `NEO4J_USERNAME`: Имя пользователя для подключения к Neo4j.
- `NEO4J_PASSWORD`: Пароль для подключения к Neo4j.

## Типы Запросов и Параметры Программы

Программа поддерживает несколько предопределённых запросов, которые можно выполнить после сбора данных.

| Запрос               | Описание                                                                 |
|----------------------|--------------------------------------------------------------------------|
| `total_users`        | Возвращает общее количество пользователей.                              |
| `total_groups`       | Возвращает общее количество групп.                                      |
| `top_users`          | Находит топ-5 пользователей с наибольшим количеством подписчиков.       |
| `top_groups`         | Находит топ-5 групп с наибольшим количеством подписчиков.               |
| `mutual_followers`   | Находит взаимных подписчиков между пользователями.                      |
| `top_subscribers`    | Находит топ-5 пользователей по числу подписок на группы.               |
| `top_cities`         | Находит топ-5 популярных городов среди пользователей.                   |
| `top_mutual_followers` | Находит пользователей с наибольшим числом общих подписчиков с другими пользователями. |

### Параметры Запуска Программы

При запуске программы можно указать несколько параметров:

- **`user_id`**: Укажите ID пользователя VK, чтобы начать сбор данных для него (по умолчанию: `self`, для текущего пользователя).
- **`log_level`**: Уровень логирования (доступные значения: `DEBUG`, `INFO`, `WARNING`, `ERROR`, `CRITICAL`).
- **`log_file`**: Путь к файлу для логов. Если не указан, логи выводятся в консоль.
- **`query`**: Предопределённый запрос для выполнения после сбора данных. **Если параметр `query` передан, программа выполнит только указанный запрос к базе данных и завершит работу, сбор данных в этом случае не производится**.

### Пример Запуска Программы

```bash
go run main.go --query=top_users
```

В этом примере программа выполнит запрос `top_users` и выведет топ-5 пользователей по количеству подписчиков. Поскольку параметр `query` передан, программа не будет собирать новые данные.

## Возможности Запуска из Командной Строки

1. **Указание конкретного пользователя**: можно задать ID пользователя для сбора данных о его подписчиках и подписках.
2. **Уровень логирования**: можно настроить логирование для вывода дополнительной информации.
3. **Сохранение логов**: логи можно сохранять в указанный файл для последующего анализа.
4. **Предопределенные запросы**: можно указать один из запросов для запуска после сбора данных, что позволяет быстро выполнять анализ без изменения кода.

## Запуск Базы Данных с помощью Docker Compose

В папке deployments находится docker-compose.yml файл, который содержит настройку для запуска базы данных Neo4j. 
